<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3c.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
	xmlns:c="http://java.sun.com/jsp/jstl/core"
	xmlns:h="http://java.sun.com/jsf/html"
	xmlns:f="http://java.sun.com/jsf/core"
	xmlns:ui="http://java.sun.com/jsf/facelets"
    xmlns:p="http://primefaces.org/ui"
    >
	<ui:composition template="/templates/single_center_card.xhtml">
		<ui:define name="html_header_title">	
			#{msg['resetPassword.title']}	
		</ui:define>

		<ui:define name="html_header_content">	
			<f:metadata>
				<f:viewAction action="#{userManager.isLoggedInForwardHome()}" />
			</f:metadata>			
		</ui:define>

		<ui:define name="single_center_card_content">
			<div id="lost-password-panel" class="card">	
				<div class="card-title indigo darken-1">
					<div class="row">
						<div class="col s12 center-align" style="height: 15px;"/>
						<div class="col s12 center-align" style="height: 66px;">
							<img src="#{request.contextPath}/resources/images/lost_password.png"/>
						</div>
						<div class="col s12 center-align" style="height: 15px;"/>
					</div>
				</div>
				<div class="card-content ">
					<span class="card-title">#{msg['resetPassword.title']}</span>
					<div class="left-align">
						<h:form id="lost-password-form">
							<div class="row">
								<div class="col s12" style="height: 10px;"/>
								<div class="col s12 center-align"> 
									<p:outputLabel escape="false" value="#{msg['resetPassword.text']}" />
								</div>
								<div class="col s12" style="height: 10px;"/>
								<div class="col s12 center-align" style="height: 15px;">
									<p:outputLabel id="resetPasswordMessage" value="#{messageBean.resetPasswordMessage}" class="error-message" />
								</div>
								<div class="col s12" style="height: 10px;"/>
								<div class="col s12 input-field"> 
									<p:inputText id="usernameOrEmail" value="#{resetPasswordFormBean.usernameOrEmail}" autocomplete="off" type="text"/>
									<p:outputLabel for="usernameOrEmail">#{msg['resetPassword.usernameOrEmail']}</p:outputLabel>
								</div>
								<div class="col s12" style="height: 25px;"/>
								<div class="col s12">
									<div class="center-align">
										<p:commandButton id="resetPassword" styleClass="waves-effect waves-light btn indigo darken-1" style="width: 100%;" type="submit"
														 		value="#{msg['action.send']}" update="resetPasswordMessage" action="#{userManager.resetPassword()}" oncomplete="handleResetPasswordRequest(xhr, status, args)">
										</p:commandButton>
									</div>
								</div>														
							</div>
							<p:defaultCommand target="resetPassword" />
						</h:form>
					</div>
				</div>
			</div>
		</ui:define>
	</ui:composition>
</html>